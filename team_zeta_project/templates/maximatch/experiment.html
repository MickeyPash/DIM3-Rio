{% extends 'maximatch/base.html' %}

{% load maximatch_extras %}

{% block title %}{{ experiment_title }}{% endblock %}

{% block body_block %}
    
    <div class="page-header">
      <h1>{{ experiment_title }}</h1>
    </div>

    {% if experiment %}
            <p><strong>Short description: </strong>{{ experiment.short_description }}</p>
            <p><strong>Description: </strong>{{ experiment.description }}</p>
            <p><strong>Status: </strong>{{ experiment.status }}</p>
            <p><strong>Location: </strong>{{ experiment.location }}</p>
            <p><strong>Duration: </strong>{{ experiment.duration }}</p>
            <p><strong>Payment cash: </strong>Â£{{ experiment.payment_cash }}</p>
            <p><strong>Payment credit: </strong>{{ experiment.payment_credit }} credits</p>
            <p><strong>Payment other: </strong>{{ experiment.payment_other }}</p>
            <p><strong>Researcher:</strong> {{ experiment.researcher.user.first_name}}</p>

            {% if user.id|is_researcher %}
            <p><strong>Participants needed: </strong>{{ experiment.experiment.participants_needed }}</p>
            <p><strong>Published on: </strong>{{ experiment.published }}</p>
            <p><strong>Start date: </strong>{{ experiment.start_date }}</p>
            <p><strong>End date: </strong>{{ experiment.end_date }}</p>
            {% endif %}

        {% if user.id|is_researcher %}
            <a href="/maximatch/view_participants/{{ experiment.url }}" class="no-style"><button type="button" class="btn btn-default">View Participants</button></a>
            {% if user.id == experiment.researcher.user.id %}
            <a href="/maximatch/edit_experiment/{{ experiment.url }}" class="no-style"><button type="button" class="btn btn-default">Edit</button></a>
            {% endif %}
        <br><br>
        {% elif user.id and not applied %}

            <p><a class="btn btn-default" href="/maximatch/apply_experiment/{{ experiment.url }}" role="button">Apply</a></p>
        {% elif user.id and applied %}
            <p><a class="btn btn-default disabled" role="button">Applied</a></p>
        {% else %}
            <p><a class="btn btn-default disabled" role="button">You must be logged in to apply</a></p>
        {% endif %}

    {% else %}
        <div class="alert alert-danger">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>    
        The specified experiment {{ experiment_title }} could not be found!
        </div>
    {% endif %}

    <p><a href="/maximatch">&laquo; Back to experiment list</a></p>
{% endblock %}